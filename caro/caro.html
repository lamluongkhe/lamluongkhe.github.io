<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="" content="1">
    <title>Document</title>
    <style>
        body{
            width: 100%;
            height: 100%;
            position: relative;
            border: 1px solid blue;
            padding-bottom: 50px;
        }
        div{
            display: grid;
            grid-template-columns: auto auto auto;
            justify-content: center;
        }
        h1{
            display: flex;
            justify-content: center;
        }
        button{
            position: absolute;
            margin-left:49% ;
            margin-top: 20px;
        }
        #themchu{
            color:rgb(230, 107, 25);
        }
    </style>
</head>
<body>
    <h1>CHÚC BẠN VUI VẺ</h1>
    <div id='themchu'></div>
    <div id="ca">
    <canvas id="0" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="1" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="2" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="3" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="4" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="5" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="6" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="7" width="70px" height="70px" onclick="danhdau(this)"></canvas>
    <canvas id="8" width="70px" height="70px" onclick="danhdau(this)"></canvas>
</div>
<button onclick="xoa()">Chơi lai</button>
   
   <script>
        dem=0;
         a=new Array();
         j=0;
    function xoa(){
        location.reload();
    }

         for(i=0;i<9;i++)
        {       
            var ve=document.getElementsByTagName("canvas")[i];
            var ovuong = ve.getContext("2d");
            ovuong.strokeStyle="black";
            ovuong.strokeRect(20,20,50,50);
        }     
        function danhdau(ve)
        {
            vitri=parseInt(ve.id);
                    if(ve.id!="x" && ve.id!="o")
                    {
                        if(dem%2==0)
                        {
                            var x1=ve.getContext("2d");
                            var x2=ve.getContext("2d");
                            x1.strokeStyle="blue";
                            x1.moveTo(20,20);
                            x1.lineTo(70,70);
                            x1.stroke();
                            x2.strokeStyle="blue";
                            x2.moveTo(70,20);
                            x2.lineTo(20,70);
                            x2.stroke();
                            a[ve.id]='x';
                            ve.id="x";
                        }
                        else
                        {
                            var O=ve.getContext("2d");
                            O.beginPath();
                            O.fillStyle="red";
                            O.strokeStyle="red";
                            O.arc(45,45,25,0,2*Math.PI);
                            O.fill()
                            a[ve.id]='o';
                            ve.id="o";
                        }
                        dem++;   
                
                }
            for(i=0;i<9;i++){
                 if(i%3==0&&(i+1)%3==1&&(i+2)%3==2){
                    if(a[i]==a[i+1]&&a[i+1]==a[i+2]&&(a[i]=='x'||a[i]=='o'))
                {
                    alert(ve.id+" win");
                }
                if(a[i]==a[i+4]&&a[i+4]==a[i+8]&&(a[i]=='x'||a[i]=='o'))
                {
                    alert(ve.id+" win");
                }
            }
                if(i%3==(i+3)%3&&(i+6)%3==i%3)
                    if(a[i]==a[i+3]&&a[i+3]==a[i+6]&&(a[i]=='x'||a[i]=='o'))
                    {
                        alert(ve.id+" win");
                    }
                    if(i%3==2&&(i+2)%3==1&&(i+4)%3==0){
                        if(a[i]==a[i+2]&&a[i+2]==a[i+4]&&(a[i]=='x'||a[i]=='o'))
                            {
                                alert(ve.id+" win");
                            }
                } 
                
        }
        j++;
        if(j==9)
        {
            var themchu=document.createElement('h2');
            var chu=document.createTextNode("BÀN CỜ ĐẦY !");
            themchu.appendChild(chu);
            document.getElementById('themchu').appendChild(themchu);
        }
        
                // switch(vitri)
                // {
                    // case 0:
                        // if(a[0]==a[2]&&a[1]==a[0])
                        // {
                            // alert(ve.id+" WIN");
                        // }
                        // else if(a[3]==a[6]&&a[0]==a[3])
                        // {
                            // alert(ve.id+" WIN");
                        // }
                        // else if(a[0]==a[4]&&a[0]==a[9])
                        // {
                            // alert(ve.id+" WIN");
                        // }
                        // break;
                    // case 1:
                        // if(a[0]==a[1]&&a[1]==a[2])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        // if(a[1]==a[4]&&a[1]==a[7])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // break;
                    // case 2:
                        // if(a[2]==a[1]&&a[2]==a[0])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // if(a[2]==a[4]&&a[2]==a[6])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // if(a[2]==a[5]&&a[2]==a[8])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // break;
                    // case 3:
                        // if(a[3]==a[4]&&a[3]==a[5])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        // if(a[3]==a[0]&&a[1]==a[6])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // break;
                    // case 4:
                    // if(a[4]==a[1]&&a[4]==a[7])
                        // {
                            // alert(ve.id+" WIN");
                        // }
                        // if(a[4]==a[3]&&a[4]==a[5])
                        // {
                            // alert(ve.id+" WIN");
                        // }
                        // if(a[4]==a[0]&&a[4]==a[8])
                        // {
                            // alert(ve.id+" WIN");
                        // }
                        // if(a[4]==a[2]&&a[4]==a[6])
                        // {
                            // alert(ve.id+" WIN");
                        // }
                        // break;
                    // case 5:
                        // if(a[5]==a[2]&&a[5]==a[8])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        // if(a[5]==a[3]&&a[5]==a[4])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // break;
                    //  case 6:
                        // if(a[6]==a[3]&&a[6]==a[0])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        //  if(a[6]==a[4]&&a[6]==a[2])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        // if(a[6]==a[7]&&a[6]==a[8])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // break;
                    // case 7:
                        // if(a[7]==a[6]&&a[1]==a[8])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        // if(a[7]==a[4]&&a[1]==a[1])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // break;
                    // case 8:
                        // if(a[8]==a[5]&&a[8]==a[2])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        // if(a[8]==a[7]&&a[8]==a[6])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                        // if(a[8]==a[4]&&a[8]==a[0])
                            // {
                                // alert(ve.id+" WIN");
                            // }
                            // break;
                        // }
                }
              
        
        
    </script>
</body>
</html>